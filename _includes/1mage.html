{% comment %} SETS alt title from filename if include.title is not provided {% endcomment %}{% if include.title And include.title != "" And include.title != nil %} {% assign filename = include.title %}{% else %}  {% assign filenameparts = include.imagepath | split: "/" %} {% assign filename = filenameparts | last | replace: file.extname,"" %}{% endif %}{% comment %} SETS height to 100px if include.height is not provided {% endcomment %}{% if include.height And include.height != "" And include.height != nil %}   {% assign height = include.height %}{% else %}  {% assign height = "100px" %}{% endif %}{% comment %} SETS width to 100% if include.width is not provided {% endcomment %}{% if include.width And include.width != "" And include.width != nil %}{% assign width = include.width %}{% else %}  {% assign width = "100%" %}{% endif %}{% comment %} USES weserv.nl to downsize image if possible {% endcomment %}![{{filename}}](//images.weserv.nl/?url={{ page.siteurl }}{{ page.dir }}{{ include.imagepath }}&w=477 ){: height="{{height}}" width={{width}}}